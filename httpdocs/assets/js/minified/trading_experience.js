var tradingKnowledgeWrapper=$("#trading-knowledge"),agreeAckSection=$('[data-conditional-field="agree_ack"]'),agreeAckField=$('[name="agree_ack"]'),professionalExperienceLevelField=$('[name="professional_experience_level"]'),tradedOtcTimesField=$('[name="traded_otc_times"]'),tradedDerivativesTimesField=$('[name="traded_derivatives_times"]'),tradedSharesTimesField=$('[name="traded_shares_times"]'),understandRiskField=$('[name="understand_risk"]'),riskAcceptanceSelector=$('[name="traded_shares_times"], [name="traded_derivatives_times"], [name="traded_otc_times"], [name="professional_experience_level"], [name="understand_risk"]'),displayRiskAcceptanceScore=20,displayBlockWarningMessageMinScore=0,displayBlockWarningMessageMaxScore=5,displayLeverageWarningMessageMinScore=10,displayLeverageWarningMessageMaxScore=15,riskQuestionsValues={professional_experience_level:{"Recent work experience in a financial institution":15,"A relevant professional qualification and/or education":15,"Both of the above":20,None:0,"":0},traded_otc_times:{"More than 25 times":20,"10 to 25 times":15,"Less than 10 times":10,Never:0,"":0},traded_derivatives_times:{"More than 25 times":15,"10 to 25 times":10,"Less than 10 times":5,Never:0,"":0},traded_shares_times:{"More than 25 times":10,"10 to 25 times":10,"Less than 10 times":5,Never:0,"":0},understand_risk:{yes:5,no:0,"":0}};function riskAcceptance(){var c=tradedSharesTimesField.val(),a=tradedDerivativesTimesField.val(),f=tradedOtcTimesField.val(),d=professionalExperienceLevelField.val(),e=understandRiskField.val();if(c==""||a==""||f==""||d==""||e==""){riskAcceptanceValidationRule="";agreeAckSection.addClass("hidden");return}var b=0;b=b+riskQuestionsValues.traded_shares_times[c]+riskQuestionsValues.traded_derivatives_times[a]+riskQuestionsValues.traded_otc_times[f]+riskQuestionsValues.professional_experience_level[d]+riskQuestionsValues.understand_risk[e];if(b<displayRiskAcceptanceScore){enableFormField(agreeAckField);agreeAckSection.removeClass("hidden")}else{disableFormField(agreeAckField);agreeAckSection.addClass("hidden")}}function experienceWarningMessage(d){var f=professionalExperienceLevelField.val(),h=tradedOtcTimesField.val(),b=tradedDerivativesTimesField.val(),e=tradedSharesTimesField.val(),g=understandRiskField.val(),c=0,a=getFirstAnsweredQuestion();if(f==""&&h==""&&b==""&&e==""&&g==""){hideAllExperienceMessages();return}c=c+riskQuestionsValues.professional_experience_level[f]+riskQuestionsValues.traded_otc_times[h]+riskQuestionsValues.traded_derivatives_times[b]+riskQuestionsValues.traded_shares_times[e]+riskQuestionsValues.understand_risk[g];if(c==displayBlockWarningMessageMinScore||c==displayBlockWarningMessageMaxScore){hideAllExperienceMessages();checkMsgDisplayPosition(d,a,"block_warning_msg")}else{if(c==displayLeverageWarningMessageMinScore||c==displayLeverageWarningMessageMaxScore){hideAllExperienceMessages();checkMsgDisplayPosition(d,a,"leverage_warning_msg")}else{hideAllExperienceMessages();checkMsgDisplayPosition(d,a,"knowledge_success_msg")}}}function checkMsgDisplayPosition(b,a,c){if(b.val()!=""){displayExperienceMessage(b,c)}else{if(a!=""){displayExperienceMessage(a,c)}}}function hideAllExperienceMessages(){tradingKnowledgeWrapper.children().each(function(){$(this).find(".active").removeClass("active")})}function displayExperienceMessage(a,b){a.parents(".score-wrap").find("."+b).addClass("active")}function getFirstAnsweredQuestion(){if(professionalExperienceLevelField.val()!=""){return professionalExperienceLevelField}if(tradedOtcTimesField.val()!=""){return tradedOtcTimesField}if(tradedDerivativesTimesField.val()!=""){return tradedDerivativesTimesField}if(tradedSharesTimesField.val()!=""){return tradedSharesTimesField}if(understandRiskField.val()!=""){return understandRiskField}return""};