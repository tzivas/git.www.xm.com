$(document).ready(function(){var f=["first_name","last_name","country","city","phone_number","email","trading_platform_type","account_type","account_currency","account_leverage","investment_amount","account_password","account_password_confirmation"],j=$('[name="country"]'),d=$('[name="phone_number"]'),e=$('[name="account_type"]'),l="account_currency",k="account_leverage";h();m();c();i();a();b();g();j.on("change",function(){c();i();a();b();g()});e.on("change",function(){a();b();g()});function h(){$.each(f,function(n,o){var p=$('[name="'+o+'"]');if(p.val()!=""){p.valid()}})}function m(){$("select").on("change",function(){$(this).valid()})}function c(){var n=j.val(),o=d.val();if(o.length<5){if(n==""){d.val("")}else{if(countries[n]){d.val("+"+countries[n].cc)}}}}function i(){$("#country-restriction").remove();if($.inArray(j.val(),xmauCountries)!=-1){$(countryRestrictionMsg.replace("{{country_msg}}",xmauCountriesMsg)).insertAfter("#country")}else{if($.inArray(j.val(),xmukCountries)!=-1){$(countryRestrictionMsg.replace("{{country_msg}}",xmukCountriesMsg)).insertAfter("#country")}else{if($.inArray(j.val(),xmbzCountries)!=-1){$(countryRestrictionMsg.replace("{{country_msg}}",xmbzCountriesMsg)).insertAfter("#country")}else{if($.inArray(j.val(),xmCountries)!=-1){$(countryRestrictionMsg.replace("{{country_msg}}",xmCountriesMsg)).insertAfter("#country")}}}}}function a(){if(j.val()=="CN"&&$.inArray(e.val(),chinaAccountTypes)!=-1){$("#account-types-restriction").remove();$(accountTypesRestrictionMsg.replace("{{account_types_msg}}",chinaAccountTypesMsg)).insertAfter("#account_type")}else{$("#account-types-restriction").remove()}}function b(){var n={country:j.val(),account_type:e.val()};updateSelectOptions(l,allCurrencies);if(currencyRestrictions.account_type[n.account_type]!==undefined){$.each(currencyRestrictions.account_type[n.account_type],function(o,p){removeSelectOption(l,p)})}if($.inArray(n.country,xmauCountries)!=-1&&currencyRestrictions.brand_id["xmau"]!==undefined){$.each(currencyRestrictions.brand_id["xmau"],function(o,p){removeSelectOption(l,p)})}else{if($.inArray(n.country,xmbzCountries)!=-1&&currencyRestrictions.brand_id["xmbz"]!==undefined){$.each(currencyRestrictions.brand_id["xmbz"],function(o,p){removeSelectOption(l,p)})}else{if(($.inArray(n.country,xmukCountries)!=-1&&currencyRestrictions.brand_id["xmuk"]!==undefined)||(n.country=="CN"&&$.inArray(n.account_type,["XMZero"])!=-1)){$.each(currencyRestrictions.brand_id["xmuk"],function(o,p){removeSelectOption(l,p)})}else{if($.inArray(n.country,xmCountries)!=-1&&currencyRestrictions.brand_id["xm"]!==undefined){$.each(currencyRestrictions.brand_id["xm"],function(o,p){removeSelectOption(l,p)})}else{if(brandId=="xmtd"&&currencyRestrictions.brand_id["xmtd"]!==undefined){$.each(currencyRestrictions.brand_id["xmtd"],function(o,p){removeSelectOption(l,p)})}}}}}if(n.country=="IR"){$.each(currencyRestrictions.country[n.country],function(o,p){removeSelectOption(l,p)})}$.each(currencyRestrictions.country_account_type,function(p,o){if($.inArray(n.country,o.country)!=-1&&o.account_type==n.account_type){$.each(o.not_allowed_currencies,function(r,q){removeSelectOption(l,q)})}})}function g(){var q={country:j.val(),account_type:e.val()},o=allLeverages,s=[],r=[],p;if(($.inArray(q.country,xmukCountries)!=-1||(q.country=="CN"&&$.inArray(q.account_type,["XMZero"])!=-1))&&leverageRestrictions.brand_id["xmuk"]!==undefined){s.push(leverageRestrictions.brand_id["xmuk"]["maximum"])}if(leverageRestrictions.account_type[q.account_type]!==undefined){s.push(leverageRestrictions.account_type[q.account_type]["maximum"])}$.each(leverageRestrictions.country["maximum"],function(t,u){if(jQuery.inArray(q.country,u)>=0){s.push(t)}});var n=Object.keys(o);p=Math.max.apply(Math,n);if($.isEmptyObject(s)===false){p=Math.min.apply(Math,s);$.each(o,function(t,u){if(t>p){r.push(t)}});o=filterObject(o,r)}o=filterObject(o,[""]);updateSelectOptions(k,o,"prepend")}});